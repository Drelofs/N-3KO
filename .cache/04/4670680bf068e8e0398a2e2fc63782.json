{"id":"whMK","dependencies":[{"name":"/Users/julia/Documents/GitHub/N-3KO/package.json","includedInParent":true,"mtime":1557756471451},{"name":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/package.json","includedInParent":true,"mtime":1557756490182},{"name":"../utils/Class","loc":{"line":7,"column":20},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/loader/LoaderPlugin.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/utils/Class.js"},{"name":"./const","loc":{"line":8,"column":20},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/loader/LoaderPlugin.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/loader/const.js"},{"name":"../structs/Set","loc":{"line":9,"column":24},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/loader/LoaderPlugin.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/structs/Set.js"},{"name":"eventemitter3","loc":{"line":10,"column":27},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/loader/LoaderPlugin.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/eventemitter3/index.js"},{"name":"./events","loc":{"line":11,"column":21},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/loader/LoaderPlugin.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/loader/events/index.js"},{"name":"./FileTypesManager","loc":{"line":12,"column":31},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/loader/LoaderPlugin.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/loader/FileTypesManager.js"},{"name":"../utils/object/GetFastValue","loc":{"line":13,"column":27},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/loader/LoaderPlugin.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/utils/object/GetFastValue.js"},{"name":"../plugins/PluginCache","loc":{"line":14,"column":26},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/loader/LoaderPlugin.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/plugins/PluginCache.js"},{"name":"../scene/events","loc":{"line":15,"column":26},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/loader/LoaderPlugin.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/scene/events/index.js"},{"name":"./XHRSettings","loc":{"line":16,"column":26},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/loader/LoaderPlugin.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/loader/XHRSettings.js"}],"generated":{"js":"var t=require(\"../utils/Class\"),s=require(\"./const\"),e=require(\"../structs/Set\"),i=require(\"eventemitter3\"),h=require(\"./events\"),a=require(\"./FileTypesManager\"),r=require(\"../utils/object/GetFastValue\"),n=require(\"../plugins/PluginCache\"),o=require(\"../scene/events\"),l=require(\"./XHRSettings\"),u=new t({Extends:i,initialize:function(t){i.call(this);var h=t.sys.game.config,n=t.sys.settings.loader;this.scene=t,this.systems=t.sys,this.cacheManager=t.sys.cache,this.textureManager=t.sys.textures,this.sceneManager=t.sys.game.scene,a.install(this),this.prefix=\"\",this.path=\"\",this.baseURL=\"\",this.setBaseURL(r(n,\"baseURL\",h.loaderBaseURL)),this.setPath(r(n,\"path\",h.loaderPath)),this.setPrefix(r(n,\"prefix\",h.loaderPrefix)),this.maxParallelDownloads=r(n,\"maxParallelDownloads\",h.loaderMaxParallelDownloads),this.xhr=l(r(n,\"responseType\",h.loaderResponseType),r(n,\"async\",h.loaderAsync),r(n,\"user\",h.loaderUser),r(n,\"password\",h.loaderPassword),r(n,\"timeout\",h.loaderTimeout)),this.crossOrigin=r(n,\"crossOrigin\",h.loaderCrossOrigin),this.totalToLoad=0,this.progress=0,this.list=new e,this.inflight=new e,this.queue=new e,this._deleteQueue=new e,this.totalFailed=0,this.totalComplete=0,this.state=s.LOADER_IDLE,t.sys.events.once(o.BOOT,this.boot,this),t.sys.events.on(o.START,this.pluginStart,this)},boot:function(){this.systems.events.once(o.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(o.SHUTDOWN,this.shutdown,this)},setBaseURL:function(t){return void 0===t&&(t=\"\"),\"\"!==t&&\"/\"!==t.substr(-1)&&(t=t.concat(\"/\")),this.baseURL=t,this},setPath:function(t){return void 0===t&&(t=\"\"),\"\"!==t&&\"/\"!==t.substr(-1)&&(t=t.concat(\"/\")),this.path=t,this},setPrefix:function(t){return void 0===t&&(t=\"\"),this.prefix=t,this},setCORS:function(t){return this.crossOrigin=t,this},addFile:function(t){Array.isArray(t)||(t=[t]);for(var s=0;s<t.length;s++){var e=t[s];this.keyExists(e)||(this.list.set(e),this.emit(h.ADD,e.key,e.type,this,e),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(t){var s=t.hasCacheConflict();return s||this.list.iterate(function(e){if(e.type===t.type&&e.key===t.key)return s=!0,!1}),!s&&this.isLoading()&&(this.inflight.iterate(function(e){if(e.type===t.type&&e.key===t.key)return s=!0,!1}),this.queue.iterate(function(e){if(e.type===t.type&&e.key===t.key)return s=!0,!1})),s},addPack:function(t,s){s&&t.hasOwnProperty(s)&&(t={packKey:t[s]});var e=0,i=this.baseURL,h=this.path,a=this.prefix;for(var n in t){var o=t[n],l=r(o,\"baseURL\",i),u=r(o,\"path\",h),c=r(o,\"prefix\",a),d=r(o,\"files\",null),f=r(o,\"defaultType\",\"void\");if(Array.isArray(d)){this.setBaseURL(l),this.setPath(u),this.setPrefix(c);for(var p=0;p<d.length;p++){var y=d[p],g=y.hasOwnProperty(\"type\")?y.type:f;this[g]&&(this[g](y),e++)}}}return this.setBaseURL(i),this.setPath(h),this.setPrefix(a),e>0},isLoading:function(){return this.state===s.LOADER_LOADING||this.state===s.LOADER_PROCESSING},isReady:function(){return this.state===s.LOADER_IDLE||this.state===s.LOADER_COMPLETE},start:function(){this.isReady()&&(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(h.START,this),0===this.list.size?this.loadComplete():(this.state=s.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(o.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(h.PROGRESS,this.progress)},update:function(){this.state===s.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(t){if((t.state===s.FILE_POPULATED||t.state===s.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(t),this.list.delete(t),t.crossOrigin||(t.crossOrigin=this.crossOrigin),t.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(t,s){this.inflight&&(this.inflight.delete(t),this.updateProgress(),s?(this.totalComplete++,this.queue.set(t),this.emit(h.FILE_LOAD,t),t.onProcess()):(this.totalFailed++,this._deleteQueue.set(t),this.emit(h.FILE_LOAD_ERROR,t),this.fileProcessComplete(t)))},fileProcessComplete:function(t){this.scene&&this.systems&&this.systems.game&&!this.systems.game.pendingDestroy&&(t.state===s.FILE_ERRORED?t.multiFile&&t.multiFile.onFileFailed(t):t.state===s.FILE_COMPLETE&&(t.multiFile?t.multiFile.isReadyToProcess()&&t.multiFile.addToCache():t.addToCache()),this.queue.delete(t),0===this.list.size&&0===this.inflight.size&&0===this.queue.size&&this.loadComplete())},loadComplete:function(){this.emit(h.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=s.LOADER_COMPLETE,this.systems.events.off(o.UPDATE,this.update,this),this._deleteQueue.iterateLocal(\"destroy\"),this._deleteQueue.clear(),this.emit(h.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(t){this._deleteQueue.set(t)},saveJSON:function(t,s){return this.save(JSON.stringify(t),s)},save:function(t,s,e){void 0===s&&(s=\"file.json\"),void 0===e&&(e=\"application/json\");var i=new Blob([t],{type:e}),h=URL.createObjectURL(i),a=document.createElement(\"a\");return a.download=s,a.textContent=\"Download \"+s,a.href=h,a.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var t=this.systems.game.config,e=this.systems.settings.loader;this.setBaseURL(r(e,\"baseURL\",t.loaderBaseURL)),this.setPath(r(e,\"path\",t.loaderPath)),this.setPrefix(r(e,\"prefix\",t.loaderPrefix)),this.state=s.LOADER_IDLE},shutdown:function(){this.reset(),this.state=s.LOADER_SHUTDOWN,this.systems.events.off(o.UPDATE,this.update,this),this.systems.events.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=s.LOADER_DESTROYED,this.systems.events.off(o.UPDATE,this.update,this),this.systems.events.off(o.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});n.register(\"Loader\",u,\"load\"),module.exports=u;"},"sourceMaps":null,"error":null,"hash":"324bda8175de8539e4ce665268a9ef38","cacheData":{"env":{}}}