{"id":"3Mqn","dependencies":[{"name":"/Users/julia/Documents/GitHub/N-3KO/package.json","includedInParent":true,"mtime":1557756471451},{"name":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/package.json","includedInParent":true,"mtime":1557756490182},{"name":"../../../utils/Class","loc":{"line":8,"column":20},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/renderer/webgl/pipelines/TextureTintPipeline.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/utils/Class.js"},{"name":"../../../geom/polygon/Earcut","loc":{"line":9,"column":21},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/renderer/webgl/pipelines/TextureTintPipeline.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/geom/polygon/Earcut.js"},{"name":"../../../utils/object/GetFastValue","loc":{"line":10,"column":27},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/renderer/webgl/pipelines/TextureTintPipeline.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/utils/object/GetFastValue.js"},{"name":"./components/ModelViewProjection","loc":{"line":11,"column":34},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/renderer/webgl/pipelines/TextureTintPipeline.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/renderer/webgl/pipelines/components/ModelViewProjection.js"},{"name":"../shaders/TextureTint-frag.js","loc":{"line":12,"column":29},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/renderer/webgl/pipelines/TextureTintPipeline.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/renderer/webgl/shaders/TextureTint-frag.js"},{"name":"../shaders/TextureTint-vert.js","loc":{"line":13,"column":29},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/renderer/webgl/pipelines/TextureTintPipeline.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/renderer/webgl/shaders/TextureTint-vert.js"},{"name":"../../../gameobjects/components/TransformMatrix","loc":{"line":14,"column":30},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/renderer/webgl/pipelines/TextureTintPipeline.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/gameobjects/components/TransformMatrix.js"},{"name":"../Utils","loc":{"line":15,"column":20},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/renderer/webgl/pipelines/TextureTintPipeline.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/renderer/webgl/Utils.js"},{"name":"../WebGLPipeline","loc":{"line":16,"column":28},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/renderer/webgl/pipelines/TextureTintPipeline.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/renderer/webgl/WebGLPipeline.js"}],"generated":{"js":"var t=require(\"../../../utils/Class\"),e=require(\"../../../geom/polygon/Earcut\"),i=require(\"../../../utils/object/GetFastValue\"),r=require(\"./components/ModelViewProjection\"),h=require(\"../shaders/TextureTint-frag.js\"),s=require(\"../shaders/TextureTint-vert.js\"),a=require(\"../../../gameobjects/components/TransformMatrix\"),n=require(\"../Utils\"),l=require(\"../WebGLPipeline\"),u=new t({Extends:l,Mixins:[r],initialize:function(t){var e=t.renderer.config;l.call(this,{game:t.game,renderer:t.renderer,gl:t.renderer.gl,topology:i(t,\"topology\",t.renderer.gl.TRIANGLES),vertShader:i(t,\"vertShader\",s),fragShader:i(t,\"fragShader\",h),vertexCapacity:i(t,\"vertexCapacity\",6*e.batchSize),vertexSize:i(t,\"vertexSize\",5*Float32Array.BYTES_PER_ELEMENT+4*Uint8Array.BYTES_PER_ELEMENT),attributes:[{name:\"inPosition\",size:2,type:t.renderer.gl.FLOAT,normalized:!1,offset:0},{name:\"inTexCoord\",size:2,type:t.renderer.gl.FLOAT,normalized:!1,offset:2*Float32Array.BYTES_PER_ELEMENT},{name:\"inTintEffect\",size:1,type:t.renderer.gl.FLOAT,normalized:!1,offset:4*Float32Array.BYTES_PER_ELEMENT},{name:\"inTint\",size:4,type:t.renderer.gl.UNSIGNED_BYTE,normalized:!0,offset:5*Float32Array.BYTES_PER_ELEMENT}]}),this.vertexViewF32=new Float32Array(this.vertexData),this.vertexViewU32=new Uint32Array(this.vertexData),this.maxQuads=e.batchSize,this.batches=[],this._tempMatrix1=new a,this._tempMatrix2=new a,this._tempMatrix3=new a,this._tempMatrix4=new a,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.tintEffect=2,this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[],this.mvpInit()},onBind:function(){return l.prototype.onBind.call(this),this.mvpUpdate(),this},resize:function(t,e,i){return l.prototype.resize.call(this,t,e,i),this.projOrtho(0,this.width,this.height,0,-1e3,1e3),this},setTexture2D:function(t,e){return void 0===t&&(t=this.renderer.blankTexture.glTexture),void 0===e&&(e=0),this.requireTextureBatch(t,e)&&this.pushBatch(t,e),this},requireTextureBatch:function(t,e){var i=this.batches,r=i.length;return!(r>0)||!((e>0?i[r-1].textures[e-1]:i[r-1].texture)===t)},pushBatch:function(t,e){if(0===e)this.batches.push({first:this.vertexCount,texture:t,textures:[]});else{var i=[];i[e-1]=t,this.batches.push({first:this.vertexCount,texture:null,textures:i})}},flush:function(){if(this.flushLocked)return this;this.flushLocked=!0;var t,e,i,r=this.gl,h=this.vertexCount,s=this.topology,a=this.vertexSize,n=this.renderer,l=this.batches,u=l.length,o=0,p=null;if(0===u||0===h)return this.flushLocked=!1,this;r.bufferSubData(r.ARRAY_BUFFER,0,this.bytes.subarray(0,h*a));for(var d=0;d<u-1;d++){if(p=l[d],t=l[d+1],p.textures.length>0){for(e=0;e<p.textures.length;++e)(i=p.textures[e])&&n.setTexture2D(i,1+e,!1);r.activeTexture(r.TEXTURE0)}o=t.first-p.first,null===p.texture||o<=0||(n.setTexture2D(p.texture,0,!1),r.drawArrays(s,p.first,o))}if((p=l[u-1]).textures.length>0){for(e=0;e<p.textures.length;++e)(i=p.textures[e])&&n.setTexture2D(i,1+e,!1);r.activeTexture(r.TEXTURE0)}return o=h-p.first,p.texture&&o>0&&(n.setTexture2D(p.texture,0,!1),r.drawArrays(s,p.first,o)),this.vertexCount=0,l.length=0,this.flushLocked=!1,this},batchSprite:function(t,e,i){this.renderer.setPipeline(this);var r=this._tempMatrix1,h=this._tempMatrix2,s=this._tempMatrix3,a=t.frame,l=a.glTexture,u=a.u0,o=a.v0,p=a.u1,d=a.v1,c=a.x,x=a.y,g=a.cutWidth,f=a.cutHeight,T=-t.displayOriginX+c,v=-t.displayOriginY+x;if(t.isCropped){var y=t._crop;y.flipX===t.flipX&&y.flipY===t.flipY||a.updateCropUVs(y,t.flipX,t.flipY),u=y.u0,o=y.v0,p=y.u1,d=y.v1,g=y.width,f=y.height,c=y.x,x=y.y,T=-t.displayOriginX+c,v=-t.displayOriginY+x}t.flipX&&(T+=g,g*=-1),t.flipY&&(v+=f,f*=-1);var m=T+g,Y=v+f;h.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY),r.copyFrom(e.matrix),i?(r.multiplyWithOffset(i,-e.scrollX*t.scrollFactorX,-e.scrollY*t.scrollFactorY),h.e=t.x,h.f=t.y,r.multiply(h,s)):(h.e-=e.scrollX*t.scrollFactorX,h.f-=e.scrollY*t.scrollFactorY,r.multiply(h,s));var E=s.getX(T,v),M=s.getY(T,v),X=s.getX(T,Y),b=s.getY(T,Y),_=s.getX(m,Y),F=s.getY(m,Y),w=s.getX(m,v),L=s.getY(m,v),R=n.getTintAppendFloatAlpha(t._tintTL,e.alpha*t._alphaTL),A=n.getTintAppendFloatAlpha(t._tintTR,e.alpha*t._alphaTR),B=n.getTintAppendFloatAlpha(t._tintBL,e.alpha*t._alphaBL),C=n.getTintAppendFloatAlpha(t._tintBR,e.alpha*t._alphaBR);e.roundPixels&&(E=Math.round(E),M=Math.round(M),X=Math.round(X),b=Math.round(b),_=Math.round(_),F=Math.round(F),w=Math.round(w),L=Math.round(L)),this.setTexture2D(l,0);var S=t._isTinted&&t.tintFill;this.batchQuad(E,M,X,b,_,F,w,L,u,o,p,d,R,A,B,C,S,l,0)},batchQuad:function(t,e,i,r,h,s,a,n,l,u,o,p,d,c,x,g,f,T,v){var y=!1;this.vertexCount+6>this.vertexCapacity&&(this.flush(),y=!0,this.setTexture2D(T,v));var m=this.vertexViewF32,Y=this.vertexViewU32,E=this.vertexCount*this.vertexComponentCount-1;return m[++E]=t,m[++E]=e,m[++E]=l,m[++E]=u,m[++E]=f,Y[++E]=d,m[++E]=i,m[++E]=r,m[++E]=l,m[++E]=p,m[++E]=f,Y[++E]=x,m[++E]=h,m[++E]=s,m[++E]=o,m[++E]=p,m[++E]=f,Y[++E]=g,m[++E]=t,m[++E]=e,m[++E]=l,m[++E]=u,m[++E]=f,Y[++E]=d,m[++E]=h,m[++E]=s,m[++E]=o,m[++E]=p,m[++E]=f,Y[++E]=g,m[++E]=a,m[++E]=n,m[++E]=o,m[++E]=u,m[++E]=f,Y[++E]=c,this.vertexCount+=6,y},batchTri:function(t,e,i,r,h,s,a,n,l,u,o,p,d,c,x,g){var f=!1;this.vertexCount+3>this.vertexCapacity&&(this.flush(),this.setTexture2D(x,g),f=!0);var T=this.vertexViewF32,v=this.vertexViewU32,y=this.vertexCount*this.vertexComponentCount-1;return T[++y]=t,T[++y]=e,T[++y]=a,T[++y]=n,T[++y]=c,v[++y]=o,T[++y]=i,T[++y]=r,T[++y]=a,T[++y]=u,T[++y]=c,v[++y]=p,T[++y]=h,T[++y]=s,T[++y]=l,T[++y]=u,T[++y]=c,v[++y]=d,this.vertexCount+=3,f},batchTexture:function(t,e,i,r,h,s,a,n,l,u,o,p,d,c,x,g,f,T,v,y,m,Y,E,M,X,b,_,F,w,L,R){this.renderer.setPipeline(this,t);var A=this._tempMatrix1,B=this._tempMatrix2,C=this._tempMatrix3,S=T/i+_,P=v/r+F,z=(T+y)/i+_,Q=(v+m)/r+F,D=a,q=n,U=-g,k=-f;if(t.isCropped){var O=t._crop;D=O.width,q=O.height,a=O.width,n=O.height;var V=T=O.x,N=v=O.y;p&&(V=y-O.x-O.width),d&&!e.isRenderTexture&&(N=m-O.y-O.height),S=V/i+_,P=N/r+F,z=(V+O.width)/i+_,Q=(N+O.height)/r+F,U=-g+T,k=-f+v}p&&(D*=-1,U+=a),(d^=!R&&e.isRenderTexture?1:0)&&(q*=-1,k+=n);var j=U+D,I=k+q;B.applyITRS(h,s,o,l,u),A.copyFrom(w.matrix),L?(A.multiplyWithOffset(L,-w.scrollX*c,-w.scrollY*x),B.e=h,B.f=s,A.multiply(B,C)):(B.e-=w.scrollX*c,B.f-=w.scrollY*x,A.multiply(B,C));var G=C.getX(U,k),W=C.getY(U,k),H=C.getX(U,I),J=C.getY(U,I),K=C.getX(j,I),Z=C.getY(j,I),$=C.getX(j,k),tt=C.getY(j,k);w.roundPixels&&(G=Math.round(G),W=Math.round(W),H=Math.round(H),J=Math.round(J),K=Math.round(K),Z=Math.round(Z),$=Math.round($),tt=Math.round(tt)),this.setTexture2D(e,0),this.batchQuad(G,W,H,J,K,Z,$,tt,S,P,z,Q,Y,E,M,X,b,e,0)},batchTextureFrame:function(t,e,i,r,h,s,a){this.renderer.setPipeline(this);var l=this._tempMatrix1.copyFrom(s),u=this._tempMatrix2,o=e+t.width,p=i+t.height;a?l.multiply(a,u):u=l;var d=u.getX(e,i),c=u.getY(e,i),x=u.getX(e,p),g=u.getY(e,p),f=u.getX(o,p),T=u.getY(o,p),v=u.getX(o,i),y=u.getY(o,i);this.setTexture2D(t.glTexture,0),r=n.getTintAppendFloatAlpha(r,h),this.batchQuad(d,c,x,g,f,T,v,y,t.u0,t.v0,t.u1,t.v1,r,r,r,r,0,t.glTexture,0)},drawFillRect:function(t,e,i,r,h,s){var a=t+i,l=e+r;this.setTexture2D();var u=n.getTintAppendFloatAlphaAndSwap(h,s);this.batchQuad(t,e,t,l,a,l,a,e,0,0,1,1,u,u,u,u,2)},batchFillRect:function(t,e,i,r,h,s){this.renderer.setPipeline(this);var a=this._tempMatrix3;s&&s.multiply(h,a);var n=t+i,l=e+r,u=a.getX(t,e),o=a.getY(t,e),p=a.getX(t,l),d=a.getY(t,l),c=a.getX(n,l),x=a.getY(n,l),g=a.getX(n,e),f=a.getY(n,e),T=this.currentFrame,v=T.u0,y=T.v0,m=T.u1,Y=T.v1;this.batchQuad(u,o,p,d,c,x,g,f,v,y,m,Y,this.fillTint.TL,this.fillTint.TR,this.fillTint.BL,this.fillTint.BR,this.tintEffect)},batchFillTriangle:function(t,e,i,r,h,s,a,n){this.renderer.setPipeline(this);var l=this._tempMatrix3;n&&n.multiply(a,l);var u=l.getX(t,e),o=l.getY(t,e),p=l.getX(i,r),d=l.getY(i,r),c=l.getX(h,s),x=l.getY(h,s),g=this.currentFrame,f=g.u0,T=g.v0,v=g.u1,y=g.v1;this.batchTri(u,o,p,d,c,x,f,T,v,y,this.fillTint.TL,this.fillTint.TR,this.fillTint.BL,this.tintEffect)},batchStrokeTriangle:function(t,e,i,r,h,s,a,n,l){var u=this.tempTriangle;u[0].x=t,u[0].y=e,u[0].width=a,u[1].x=i,u[1].y=r,u[1].width=a,u[2].x=h,u[2].y=s,u[2].width=a,u[3].x=t,u[3].y=e,u[3].width=a,this.batchStrokePath(u,a,!1,n,l)},batchFillPath:function(t,i,r){this.renderer.setPipeline(this);var h=this._tempMatrix3;r&&r.multiply(i,h);for(var s,a,n=t.length,l=this.polygonCache,u=this.fillTint.TL,o=this.fillTint.TR,p=this.fillTint.BL,d=this.tintEffect,c=0;c<n;++c)a=t[c],l.push(a.x,a.y);n=(s=e(l)).length;for(var x=this.currentFrame,g=0;g<n;g+=3){var f=2*s[g+0],T=2*s[g+1],v=2*s[g+2],y=l[f+0],m=l[f+1],Y=l[T+0],E=l[T+1],M=l[v+0],X=l[v+1],b=h.getX(y,m),_=h.getY(y,m),F=h.getX(Y,E),w=h.getY(Y,E),L=h.getX(M,X),R=h.getY(M,X),A=x.u0,B=x.v0,C=x.u1,S=x.v1;this.batchTri(b,_,F,w,L,R,A,B,C,S,u,o,p,d)}l.length=0},batchStrokePath:function(t,e,i,r,h){this.renderer.setPipeline(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var s=t.length-1,a=0;a<s;a++){var n=t[a],l=t[a+1];this.batchLine(n.x,n.y,l.x,l.y,n.width/2,l.width/2,e,a,!i&&a===s-1,r,h)}},batchLine:function(t,e,i,r,h,s,a,n,l,u,o){this.renderer.setPipeline(this);var p=this._tempMatrix3;o&&o.multiply(u,p);var d=i-t,c=r-e,x=Math.sqrt(d*d+c*c),g=h*(r-e)/x,f=h*(t-i)/x,T=s*(r-e)/x,v=s*(t-i)/x,y=i-T,m=r-v,Y=t-g,E=e-f,M=i+T,X=r+v,b=t+g,_=e+f,F=p.getX(y,m),w=p.getY(y,m),L=p.getX(Y,E),R=p.getY(Y,E),A=p.getX(M,X),B=p.getY(M,X),C=p.getX(b,_),S=p.getY(b,_),P=this.strokeTint,z=this.tintEffect,Q=P.TL,D=P.TR,q=P.BL,U=P.BR,k=this.currentFrame,O=k.u0,V=k.v0,N=k.u1,j=k.v1;if(this.batchQuad(C,S,L,R,F,w,A,B,O,V,N,j,Q,D,q,U,z),!(a<=2)){var I=this.prevQuad,G=this.firstQuad;n>0&&I[4]?this.batchQuad(C,S,L,R,I[0],I[1],I[2],I[3],O,V,N,j,Q,D,q,U,z):(G[0]=C,G[1]=S,G[2]=L,G[3]=R,G[4]=1),l&&G[4]?this.batchQuad(F,w,A,B,G[0],G[1],G[2],G[3],O,V,N,j,Q,D,q,U,z):(I[0]=F,I[1]=w,I[2]=A,I[3]=B,I[4]=1)}}});module.exports=u;"},"sourceMaps":null,"error":null,"hash":"2f7d6f58f52b232f24dce6c5cf04050c","cacheData":{"env":{}}}