{"id":"5bRZ","dependencies":[{"name":"/Users/julia/Documents/GitHub/N-3KO/package.json","includedInParent":true,"mtime":1557756471451},{"name":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/package.json","includedInParent":true,"mtime":1557756490182},{"name":"../../renderer/BlendModes","loc":{"line":7,"column":25},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/gameobjects/rendertexture/RenderTexture.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/renderer/BlendModes.js"},{"name":"../../cameras/2d/BaseCamera","loc":{"line":8,"column":21},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/gameobjects/rendertexture/RenderTexture.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/cameras/2d/BaseCamera.js"},{"name":"../../display/canvas/CanvasPool","loc":{"line":9,"column":25},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/gameobjects/rendertexture/RenderTexture.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/display/canvas/CanvasPool.js"},{"name":"../../utils/Class","loc":{"line":10,"column":20},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/gameobjects/rendertexture/RenderTexture.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/utils/Class.js"},{"name":"../components","loc":{"line":11,"column":25},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/gameobjects/rendertexture/RenderTexture.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/gameobjects/components/index.js"},{"name":"../../const","loc":{"line":12,"column":20},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/gameobjects/rendertexture/RenderTexture.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/const.js"},{"name":"../../textures/Frame","loc":{"line":13,"column":20},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/gameobjects/rendertexture/RenderTexture.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/textures/Frame.js"},{"name":"../GameObject","loc":{"line":14,"column":25},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/gameobjects/rendertexture/RenderTexture.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/gameobjects/GameObject.js"},{"name":"./RenderTextureRender","loc":{"line":15,"column":21},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/gameobjects/rendertexture/RenderTexture.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/gameobjects/rendertexture/RenderTextureRender.js"},{"name":"../../renderer/webgl/Utils","loc":{"line":16,"column":20},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/gameobjects/rendertexture/RenderTexture.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/renderer/webgl/Utils.js"},{"name":"../../utils/string/UUID","loc":{"line":17,"column":19},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/gameobjects/rendertexture/RenderTexture.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/utils/string/UUID.js"}],"generated":{"js":"var e=require(\"../../renderer/BlendModes\"),t=require(\"../../cameras/2d/BaseCamera\"),r=require(\"../../display/canvas/CanvasPool\"),i=require(\"../../utils/Class\"),s=require(\"../components\"),a=require(\"../../const\"),h=require(\"../../textures/Frame\"),n=require(\"../GameObject\"),l=require(\"./RenderTextureRender\"),o=require(\"../../renderer/webgl/Utils\"),u=require(\"../../utils/string/UUID\"),d=new i({Extends:n,Mixins:[s.Alpha,s.BlendMode,s.ComputedSize,s.Crop,s.Depth,s.Flip,s.GetBounds,s.Mask,s.Origin,s.Pipeline,s.ScaleMode,s.ScrollFactor,s.Tint,s.Transform,s.Visible,l],initialize:function(e,i,s,h,l){void 0===i&&(i=0),void 0===s&&(s=0),void 0===h&&(h=32),void 0===l&&(l=32),n.call(this,e,\"RenderTexture\"),this.renderer=e.sys.game.renderer,this.textureManager=e.sys.textures,this.globalTint=16777215,this.globalAlpha=1,this.canvas=r.create2D(this,h,l),this.context=this.canvas.getContext(\"2d\"),this.framebuffer=null,this._crop=this.resetCropObject(),this.texture=e.sys.textures.addCanvas(u(),this.canvas),this.frame=this.texture.get(),this._saved=!1,this._eraseMode=!1,this.camera=new t(0,0,h,l),this.dirty=!1,this.gl=null;var o=this.renderer;if(o.type===a.WEBGL){var d=o.gl;this.gl=d,this.drawGameObject=this.batchGameObjectWebGL,this.framebuffer=o.createFramebuffer(h,l,this.frame.source.glTexture,!1)}else o.type===a.CANVAS&&(this.drawGameObject=this.batchGameObjectCanvas);this.camera.setScene(e),this.setPosition(i,s),this.setSize(h,l),this.setOrigin(0,0),this.initPipeline()},setSize:function(e,t){return this.resize(e,t)},resize:function(e,t){if(void 0===t&&(t=e),e!==this.width||t!==this.height){if(this.canvas.width=e,this.canvas.height=t,this.gl){var r=this.gl;this.renderer.deleteTexture(this.frame.source.glTexture),this.renderer.deleteFramebuffer(this.framebuffer),this.frame.source.glTexture=this.renderer.createTexture2D(0,r.NEAREST,r.NEAREST,r.CLAMP_TO_EDGE,r.CLAMP_TO_EDGE,r.RGBA,null,e,t,!1),this.framebuffer=this.renderer.createFramebuffer(e,t,this.frame.source.glTexture,!1),this.frame.glTexture=this.frame.source.glTexture}this.frame.source.width=e,this.frame.source.height=t,this.camera.setSize(e,t),this.frame.setSize(e,t),this.width=e,this.height=t}return this},setGlobalTint:function(e){return this.globalTint=e,this},setGlobalAlpha:function(e){return this.globalAlpha=e,this},saveTexture:function(e){return this.textureManager.renameTexture(this.texture.key,e),this._saved=!0,this.texture},fill:function(e,t){void 0===t&&(t=1);var r=255&(e>>16|0),i=255&(e>>8|0),s=255&(0|e);if(this.gl){var a=this.renderer,h=this.getBounds();a.setFramebuffer(this.framebuffer,!0),this.pipeline.drawFillRect(h.x,h.y,h.right,h.bottom,o.getTintFromFloats(r/255,i/255,s/255,1),t),a.setFramebuffer(null,!0)}else this.context.fillStyle=\"rgba(\"+r+\",\"+i+\",\"+s+\",\"+t+\")\",this.context.fillRect(0,0,this.canvas.width,this.canvas.height);return this},clear:function(){if(this.dirty){var e=this.gl;if(e){var t=this.renderer;t.setFramebuffer(this.framebuffer,!0),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),t.setFramebuffer(null,!0)}else{var r=this.context;r.save(),r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,this.canvas.width,this.canvas.height),r.restore()}this.dirty=!1}return this},erase:function(t,r,i){this._eraseMode=!0;var s=this.renderer.currentBlendMode;return this.renderer.setBlendMode(e.ERASE),this.draw(t,r,i,1,16777215),this.renderer.setBlendMode(s),this._eraseMode=!1,this},draw:function(e,t,r,i,s){void 0===i&&(i=this.globalAlpha),s=void 0===s?(this.globalTint>>16)+(65280&this.globalTint)+((255&this.globalTint)<<16):(s>>16)+(65280&s)+((255&s)<<16),Array.isArray(e)||(e=[e]);var a=this.gl;if(this.camera.preRender(1,1),a){var h=this.camera._cx,n=this.camera._cy,l=this.camera._cw,o=this.camera._ch;this.renderer.setFramebuffer(this.framebuffer,!1),this.renderer.pushScissor(h,n,l,o,o);var u=this.pipeline;u.projOrtho(0,this.width,0,this.height,-1e3,1e3),this.batchList(e,t,r,i,s),u.flush(),this.renderer.setFramebuffer(null,!1),this.renderer.popScissor(),u.projOrtho(0,u.width,u.height,0,-1e3,1e3)}else this.renderer.setContext(this.context),this.batchList(e,t,r,i,s),this.renderer.setContext();return this.dirty=!0,this},drawFrame:function(e,t,r,i,s,a){void 0===r&&(r=0),void 0===i&&(i=0),void 0===s&&(s=this.globalAlpha),a=void 0===a?(this.globalTint>>16)+(65280&this.globalTint)+((255&this.globalTint)<<16):(a>>16)+(65280&a)+((255&a)<<16);var h=this.gl,n=this.textureManager.getFrame(e,t);if(n){if(this.camera.preRender(1,1),h){var l=this.camera._cx,o=this.camera._cy,u=this.camera._cw,d=this.camera._ch;this.renderer.setFramebuffer(this.framebuffer,!1),this.renderer.pushScissor(l,o,u,d,d);var c=this.pipeline;c.projOrtho(0,this.width,0,this.height,-1e3,1e3),c.batchTextureFrame(n,r,i,a,s,this.camera.matrix,null),c.flush(),this.renderer.setFramebuffer(null,!1),this.renderer.popScissor(),c.projOrtho(0,c.width,c.height,0,-1e3,1e3)}else this.batchTextureFrame(n,r,i,s,a);this.dirty=!0}return this},batchList:function(e,t,r,i,s){for(var a=0;a<e.length;a++){var n=e[a];n&&n!==this&&(n.renderWebGL||n.renderCanvas?this.drawGameObject(n,t,r):n.isParent||n.list?this.batchGroup(n.getChildren(),t,r):\"string\"==typeof n?this.batchTextureFrameKey(n,null,t,r,i,s):n instanceof h?this.batchTextureFrame(n,t,r,i,s):Array.isArray(n)&&this.batchList(n,t,r,i,s))}},batchGroup:function(e,t,r){void 0===t&&(t=0),void 0===r&&(r=0);for(var i=0;i<e.length;i++){var s=e[i];if(s.willRender()){var a=s.x+t,h=s.y+r;this.drawGameObject(s,a,h)}}},batchGameObjectWebGL:function(e,t,r){void 0===t&&(t=e.x),void 0===r&&(r=e.y);var i=e.x,s=e.y;this._eraseMode||this.renderer.setBlendMode(e.blendMode),e.setPosition(t,r),e.renderWebGL(this.renderer,e,0,this.camera,null),e.setPosition(i,s)},batchGameObjectCanvas:function(t,r,i){void 0===r&&(r=t.x),void 0===i&&(i=t.y);var s=t.x,a=t.y;if(this._eraseMode){var h=t.blendMode;t.blendMode=e.ERASE}t.setPosition(r,i),t.renderCanvas(this.renderer,t,0,this.camera,null),t.setPosition(s,a),this._eraseMode&&(t.blendMode=h)},batchTextureFrameKey:function(e,t,r,i,s,a){var h=this.textureManager.getFrame(e,t);h&&this.batchTextureFrame(h,r,i,s,a)},batchTextureFrame:function(e,t,r,i,s){if(void 0===t&&(t=0),void 0===r&&(r=0),this.gl)this.pipeline.batchTextureFrame(e,t,r,s,i,this.camera.matrix,null);else{var a=this.context,h=e.canvasData,n=e.source.image,l=this.camera.matrix;a.globalAlpha=this.globalAlpha,a.setTransform(l[0],l[1],l[2],l[3],l[4],l[5]),a.drawImage(n,h.x,h.y,h.width,h.height,t,r,h.width,h.height)}},preDestroy:function(){this._saved||(r.remove(this.canvas),this.gl&&this.renderer.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.framebuffer=null,this.texture=null)}});module.exports=d;"},"sourceMaps":null,"error":null,"hash":"64ab78e243d9598ba696d3869f359127","cacheData":{"env":{}}}