{"id":"CPbt","dependencies":[{"name":"/Users/julia/Documents/GitHub/N-3KO/package.json","includedInParent":true,"mtime":1557756471451},{"name":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/package.json","includedInParent":true,"mtime":1557756490182},{"name":"../display/canvas/CanvasPool","loc":{"line":7,"column":25},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/textures/TextureManager.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/display/canvas/CanvasPool.js"},{"name":"./CanvasTexture","loc":{"line":8,"column":28},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/textures/TextureManager.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/textures/CanvasTexture.js"},{"name":"../utils/Class","loc":{"line":9,"column":20},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/textures/TextureManager.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/utils/Class.js"},{"name":"../display/color/Color","loc":{"line":10,"column":20},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/textures/TextureManager.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/display/color/Color.js"},{"name":"../const","loc":{"line":11,"column":20},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/textures/TextureManager.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/const.js"},{"name":"eventemitter3","loc":{"line":12,"column":27},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/textures/TextureManager.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/eventemitter3/index.js"},{"name":"./events","loc":{"line":13,"column":21},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/textures/TextureManager.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/textures/events/index.js"},{"name":"../core/events","loc":{"line":14,"column":25},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/textures/TextureManager.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/core/events/index.js"},{"name":"../create/GenerateTexture","loc":{"line":15,"column":30},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/textures/TextureManager.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/create/GenerateTexture.js"},{"name":"../utils/object/GetValue","loc":{"line":16,"column":23},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/textures/TextureManager.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/utils/object/GetValue.js"},{"name":"./parsers","loc":{"line":17,"column":21},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/textures/TextureManager.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/textures/parsers/index.js"},{"name":"./Texture","loc":{"line":18,"column":22},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/textures/TextureManager.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/textures/Texture.js"}],"generated":{"js":"var t=require(\"../display/canvas/CanvasPool\"),e=require(\"./CanvasTexture\"),i=require(\"../utils/Class\"),r=require(\"../display/color/Color\"),s=require(\"../const\"),a=require(\"eventemitter3\"),n=require(\"./events\"),h=require(\"../core/events\"),u=require(\"../create/GenerateTexture\"),c=require(\"../utils/object/GetValue\"),o=require(\"./parsers\"),l=require(\"./Texture\"),d=new i({Extends:a,initialize:function(e){a.call(this),this.game=e,this.name=\"TextureManager\",this.list={},this._tempCanvas=t.create2D(this,1,1),this._tempContext=this._tempCanvas.getContext(\"2d\"),this._pending=0,e.events.once(h.BOOT,this.boot,this)},boot:function(){this._pending=2,this.on(n.LOAD,this.updatePending,this),this.on(n.ERROR,this.updatePending,this),this.addBase64(\"__DEFAULT\",this.game.config.defaultImage),this.addBase64(\"__MISSING\",this.game.config.missingImage),this.game.events.once(h.DESTROY,this.destroy,this)},updatePending:function(){this._pending--,0===this._pending&&(this.off(n.LOAD),this.off(n.ERROR),this.emit(n.READY))},checkKey:function(t){return!this.exists(t)||(console.error(\"Texture key already in use: \"+t),!1)},remove:function(t){if(\"string\"==typeof t){if(!this.exists(t))return console.warn(\"No texture found matching key: \"+t),this;t=this.get(t)}return this.list.hasOwnProperty(t.key)&&(delete this.list[t.key],t.destroy(),this.emit(n.REMOVE,t.key)),this},addBase64:function(t,e){if(this.checkKey(t)){var i=this,r=new Image;r.onerror=function(){i.emit(n.ERROR,t)},r.onload=function(){var e=i.create(t,r);o.Image(e,0),i.emit(n.ADD,t,e),i.emit(n.LOAD,t,e)},r.src=e}return this},getBase64:function(e,i,r,s){void 0===r&&(r=\"image/png\"),void 0===s&&(s=.92);var a=\"\",n=this.getFrame(e,i);if(n){var h=n.canvasData,u=t.create2D(this,h.width,h.height);u.getContext(\"2d\").drawImage(n.source.image,h.x,h.y,h.width,h.height,0,0,h.width,h.height),a=u.toDataURL(r,s),t.remove(u)}return a},addImage:function(t,e,i){var r=null;return this.checkKey(t)&&(r=this.create(t,e),o.Image(r,0),i&&r.setDataSource(i),this.emit(n.ADD,t,r)),r},addRenderTexture:function(t,e){var i=null;return this.checkKey(t)&&((i=this.create(t,e)).add(\"__BASE\",0,0,0,e.width,e.height),this.emit(n.ADD,t,i)),i},generate:function(e,i){if(this.checkKey(e)){var r=t.create(this,1,1);return i.canvas=r,u(i),this.addCanvas(e,r)}return null},createCanvas:function(e,i,r){if(void 0===i&&(i=256),void 0===r&&(r=256),this.checkKey(e)){var a=t.create(this,i,r,s.CANVAS,!0);return this.addCanvas(e,a)}return null},addCanvas:function(t,i,r){void 0===r&&(r=!1);var s=null;return r?s=new e(this,t,i,i.width,i.height):this.checkKey(t)&&(s=new e(this,t,i,i.width,i.height),this.list[t]=s,this.emit(n.ADD,t,s)),s},addAtlas:function(t,e,i,r){return Array.isArray(i.textures)||Array.isArray(i.frames)?this.addAtlasJSONArray(t,e,i,r):this.addAtlasJSONHash(t,e,i,r)},addAtlasJSONArray:function(t,e,i,r){var s=null;if(this.checkKey(t)){if(s=this.create(t,e),Array.isArray(i))for(var a=1===i.length,h=0;h<s.source.length;h++){var u=a?i[0]:i[h];o.JSONArray(s,h,u)}else o.JSONArray(s,0,i);r&&s.setDataSource(r),this.emit(n.ADD,t,s)}return s},addAtlasJSONHash:function(t,e,i,r){var s=null;if(this.checkKey(t)){if(s=this.create(t,e),Array.isArray(i))for(var a=0;a<i.length;a++)o.JSONHash(s,a,i[a]);else o.JSONHash(s,0,i);r&&s.setDataSource(r),this.emit(n.ADD,t,s)}return s},addAtlasXML:function(t,e,i,r){var s=null;return this.checkKey(t)&&(s=this.create(t,e),o.AtlasXML(s,0,i),r&&s.setDataSource(r),this.emit(n.ADD,t,s)),s},addUnityAtlas:function(t,e,i,r){var s=null;return this.checkKey(t)&&(s=this.create(t,e),o.UnityYAML(s,0,i),r&&s.setDataSource(r),this.emit(n.ADD,t,s)),s},addSpriteSheet:function(t,e,i){var r=null;if(this.checkKey(t)){var s=(r=this.create(t,e)).source[0].width,a=r.source[0].height;o.SpriteSheet(r,0,0,0,s,a,i),this.emit(n.ADD,t,r)}return r},addSpriteSheetFromAtlas:function(t,e){if(!this.checkKey(t))return null;var i=c(e,\"atlas\",null),r=c(e,\"frame\",null);if(i&&r){var s=this.get(i).get(r);if(s){var a=this.create(t,s.source.image);return s.trimmed?o.SpriteSheetFromAtlas(a,s,e):o.SpriteSheet(a,0,s.cutX,s.cutY,s.cutWidth,s.cutHeight,e),this.emit(n.ADD,t,a),a}}},create:function(t,e,i,r){var s=null;return this.checkKey(t)&&(s=new l(this,t,e,i,r),this.list[t]=s),s},exists:function(t){return this.list.hasOwnProperty(t)},get:function(t){return void 0===t&&(t=\"__DEFAULT\"),this.list[t]?this.list[t]:this.list.__MISSING},cloneFrame:function(t,e){if(this.list[t])return this.list[t].get(e).clone()},getFrame:function(t,e){if(this.list[t])return this.list[t].get(e)},getTextureKeys:function(){var t=[];for(var e in this.list)\"__DEFAULT\"!==e&&\"__MISSING\"!==e&&t.push(e);return t},getPixel:function(t,e,i,s){var a=this.getFrame(i,s);if(a){t-=a.x,e-=a.y;var n=a.data.cut;if(t+=n.x,e+=n.y,t>=n.x&&t<n.r&&e>=n.y&&e<n.b){var h=this._tempContext;h.clearRect(0,0,1,1),h.drawImage(a.source.image,t,e,1,1,0,0,1,1);var u=h.getImageData(0,0,1,1);return new r(u.data[0],u.data[1],u.data[2],u.data[3])}}return null},getPixelAlpha:function(t,e,i,r){var s=this.getFrame(i,r);if(s){t-=s.x,e-=s.y;var a=s.data.cut;if(t+=a.x,e+=a.y,t>=a.x&&t<a.r&&e>=a.y&&e<a.b){var n=this._tempContext;return n.clearRect(0,0,1,1),n.drawImage(s.source.image,t,e,1,1,0,0,1,1),n.getImageData(0,0,1,1).data[3]}}return null},setTexture:function(t,e,i){return this.list[e]&&(t.texture=this.list[e],t.frame=t.texture.get(i)),t},renameTexture:function(t,e){var i=this.get(t);return!(!i||t===e)&&(i.key=e,this.list[e]=i,delete this.list[t],!0)},each:function(t,e){for(var i=[null],r=1;r<arguments.length;r++)i.push(arguments[r]);for(var s in this.list)i[0]=this.list[s],t.apply(e,i)},destroy:function(){for(var e in this.list)this.list[e].destroy();this.list={},this.game=null,t.remove(this._tempCanvas)}});module.exports=d;"},"sourceMaps":null,"error":null,"hash":"c481e767968df1c19cff12dddbf9c043","cacheData":{"env":{}}}