{"id":"OTzz","dependencies":[{"name":"/Users/julia/Documents/GitHub/N-3KO/package.json","includedInParent":true,"mtime":1557756471451},{"name":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/package.json","includedInParent":true,"mtime":1557756490182},{"name":"./lib/geometry/Bounds","loc":{"line":7,"column":21},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/physics/matter-js/PointerConstraint.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/physics/matter-js/lib/geometry/Bounds.js"},{"name":"../../utils/Class","loc":{"line":8,"column":20},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/physics/matter-js/PointerConstraint.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/utils/Class.js"},{"name":"./lib/body/Composite","loc":{"line":9,"column":24},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/physics/matter-js/PointerConstraint.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/physics/matter-js/lib/body/Composite.js"},{"name":"./lib/constraint/Constraint","loc":{"line":10,"column":25},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/physics/matter-js/PointerConstraint.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/physics/matter-js/lib/constraint/Constraint.js"},{"name":"./lib/collision/Detector","loc":{"line":11,"column":23},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/physics/matter-js/PointerConstraint.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/physics/matter-js/lib/collision/Detector.js"},{"name":"./events","loc":{"line":12,"column":21},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/physics/matter-js/PointerConstraint.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/physics/matter-js/events/index.js"},{"name":"../../input/events","loc":{"line":13,"column":26},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/physics/matter-js/PointerConstraint.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/input/events/index.js"},{"name":"../../utils/object/Merge","loc":{"line":14,"column":20},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/physics/matter-js/PointerConstraint.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/utils/object/Merge.js"},{"name":"./lib/core/Sleeping","loc":{"line":15,"column":23},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/physics/matter-js/PointerConstraint.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/physics/matter-js/lib/core/Sleeping.js"},{"name":"../../math/Vector2","loc":{"line":16,"column":22},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/physics/matter-js/PointerConstraint.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/math/Vector2.js"},{"name":"./lib/geometry/Vertices","loc":{"line":17,"column":23},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/physics/matter-js/PointerConstraint.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/physics/matter-js/lib/geometry/Vertices.js"}],"generated":{"js":"var t=require(\"./lib/geometry/Bounds\"),i=require(\"../../utils/Class\"),n=require(\"./lib/body/Composite\"),o=require(\"./lib/constraint/Constraint\"),s=require(\"./lib/collision/Detector\"),e=require(\"./events\"),r=require(\"../../input/events\"),l=require(\"../../utils/object/Merge\"),h=require(\"./lib/core/Sleeping\"),a=require(\"../../math/Vector2\"),u=require(\"./lib/geometry/Vertices\"),c=new i({initialize:function(t,i,n){void 0===n&&(n={});this.scene=t,this.world=i,this.camera=null,this.pointer=null,this.active=!0,this.position=new a,this.body=null,this.part=null,this.constraint=o.create(l(n,{label:\"Pointer Constraint\",pointA:{x:0,y:0},pointB:{x:0,y:0},damping:0,length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}})),this.world.on(e.BEFORE_UPDATE,this.update,this),t.sys.input.on(r.POINTER_DOWN,this.onDown,this)},onDown:function(t){this.pointer||this.getBody(t)&&(this.pointer=t,this.camera=t.camera)},getBody:function(i){var o=this.position,r=this.constraint;i.camera.getWorldPoint(i.x,i.y,o);for(var l=n.allBodies(this.world.localWorld),h=0;h<l.length;h++){var a=l[h];if(!a.ignorePointer&&t.contains(a.bounds,o)&&s.canCollide(a.collisionFilter,r.collisionFilter)&&this.hitTestBody(a,o))return this.world.emit(e.DRAG_START,this.body,this.part,this),!0}return!1},hitTestBody:function(t,i){for(var n=this.constraint,o=t.parts.length>1?1:0;o<t.parts.length;o++){var s=t.parts[o];if(u.contains(s.vertices,i))return n.bodyB=t,n.pointA.x=i.x,n.pointA.y=i.y,n.pointB.x=i.x-t.position.x,n.pointB.y=i.y-t.position.y,n.angleB=t.angle,h.set(t,!1),this.part=s,this.body=t,!0}return!1},update:function(){var t=this.body,i=this.pointer;if(this.active&&i&&t)if(i.isDown){var n=this.position,o=this.constraint;this.camera.getWorldPoint(i.x,i.y,n),h.set(t,!1),o.pointA.x=n.x,o.pointA.y=n.y,this.world.emit(e.DRAG,t,this)}else this.stopDrag()},stopDrag:function(){var t=this.body,i=this.constraint;t&&(this.world.emit(e.DRAG_END,t,this),this.pointer=null,this.body=null,this.part=null,i.bodyB=null)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(e.BEFORE_UPDATE,this.update),this.scene.sys.input.off(r.POINTER_DOWN,this.onDown,this)}});module.exports=c;"},"sourceMaps":null,"error":null,"hash":"08192d91e7280ac9e788037089def910","cacheData":{"env":{}}}