{"id":"xKuU","dependencies":[{"name":"/Users/julia/Documents/GitHub/N-3KO/package.json","includedInParent":true,"mtime":1557756471451},{"name":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/package.json","includedInParent":true,"mtime":1557756490182},{"name":"../../cameras/2d/BaseCamera","loc":{"line":8,"column":25},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/renderer/webgl/WebGLRenderer.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/cameras/2d/BaseCamera.js"},{"name":"../../cameras/2d/events","loc":{"line":9,"column":27},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/renderer/webgl/WebGLRenderer.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/cameras/2d/events/index.js"},{"name":"../../utils/Class","loc":{"line":10,"column":20},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/renderer/webgl/WebGLRenderer.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/utils/Class.js"},{"name":"../../const","loc":{"line":11,"column":20},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/renderer/webgl/WebGLRenderer.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/const.js"},{"name":"../../math/pow2/IsSizePowerOfTwo","loc":{"line":12,"column":31},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/renderer/webgl/WebGLRenderer.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/math/pow2/IsSizePowerOfTwo.js"},{"name":"../../utils/array/SpliceOne","loc":{"line":13,"column":24},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/renderer/webgl/WebGLRenderer.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/utils/array/SpliceOne.js"},{"name":"../../textures/events","loc":{"line":14,"column":28},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/renderer/webgl/WebGLRenderer.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/textures/events/index.js"},{"name":"../../gameobjects/components/TransformMatrix","loc":{"line":15,"column":30},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/renderer/webgl/WebGLRenderer.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/gameobjects/components/TransformMatrix.js"},{"name":"./Utils","loc":{"line":16,"column":20},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/renderer/webgl/WebGLRenderer.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/renderer/webgl/Utils.js"},{"name":"../snapshot/WebGLSnapshot","loc":{"line":17,"column":28},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/renderer/webgl/WebGLRenderer.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/renderer/snapshot/WebGLSnapshot.js"},{"name":"./pipelines/BitmapMaskPipeline","loc":{"line":20,"column":33},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/renderer/webgl/WebGLRenderer.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/renderer/webgl/pipelines/BitmapMaskPipeline.js"},{"name":"./pipelines/ForwardDiffuseLightPipeline","loc":{"line":21,"column":42},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/renderer/webgl/WebGLRenderer.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/renderer/webgl/pipelines/ForwardDiffuseLightPipeline.js"},{"name":"./pipelines/TextureTintPipeline","loc":{"line":22,"column":34},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/renderer/webgl/WebGLRenderer.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/renderer/webgl/pipelines/TextureTintPipeline.js"}],"generated":{"js":"var e=require(\"../../cameras/2d/BaseCamera\"),t=require(\"../../cameras/2d/events\"),i=require(\"../../utils/Class\"),r=require(\"../../const\"),s=require(\"../../math/pow2/IsSizePowerOfTwo\"),n=require(\"../../utils/array/SpliceOne\"),h=require(\"../../textures/events\"),o=require(\"../../gameobjects/components/TransformMatrix\"),a=require(\"./Utils\"),u=require(\"../snapshot/WebGLSnapshot\"),l=require(\"./pipelines/BitmapMaskPipeline\"),f=require(\"./pipelines/ForwardDiffuseLightPipeline\"),c=require(\"./pipelines/TextureTintPipeline\"),d=new i({initialize:function(t){var i=this,s=t.config,n={alpha:s.transparent,depth:!1,antialias:s.antialias,premultipliedAlpha:s.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:s.failIfMajorPerformanceCaveat,powerPreference:s.powerPreference};this.config={clearBeforeRender:s.clearBeforeRender,antialias:s.antialias,backgroundColor:s.backgroundColor,contextCreation:n,resolution:s.resolution,roundPixels:s.roundPixels,maxTextures:s.maxTextures,maxTextureSize:s.maxTextureSize,batchSize:s.batchSize,maxLights:s.maxLights},this.game=t,this.type=r.WEBGL,this.width=0,this.height=0,this.canvas=t.canvas,this.lostContextCallbacks=[],this.restoredContextCallbacks=[],this.blendModes=[],this.nativeTextures=[],this.contextLost=!1,this.pipelines=null,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:\"image/png\",encoder:.92},this.currentActiveTextureUnit=0,this.currentTextures=new Array(16),this.currentFramebuffer=null,this.currentPipeline=null,this.currentProgram=null,this.currentVertexBuffer=null,this.currentIndexBuffer=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.canvas.addEventListener(\"webglcontextlost\",function(e){i.contextLost=!0,e.preventDefault();for(var t=0;t<i.lostContextCallbacks.length;++t){var r=i.lostContextCallbacks[t];r[0].call(r[1],i)}},!1),this.canvas.addEventListener(\"webglcontextrestored\",function(){i.contextLost=!1,i.init(i.config);for(var e=0;e<i.restoredContextCallbacks.length;++e){var t=i.restoredContextCallbacks[e];t[0].call(t[1],i)}},!1),this.gl=null,this.supportedExtensions=null,this.extensions={},this.glFormats=[],this.compression={ETC1:!1,PVRTC:!1,S3TC:!1},this.drawingBufferHeight=0,this.blankTexture=null,this.defaultCamera=new e(0,0,0,0),this._tempMatrix1=new o,this._tempMatrix2=new o,this._tempMatrix3=new o,this._tempMatrix4=new o,this.init(this.config)},init:function(e){var t,i=this.game,s=this.canvas,n=e.backgroundColor;if(!(t=i.config.context?i.config.context:s.getContext(\"webgl\",e.contextCreation)||s.getContext(\"experimental-webgl\",e.contextCreation))||t.isContextLost())throw this.contextLost=!0,new Error(\"WebGL unsupported\");this.gl=t,i.context=t;for(var o=0;o<=27;o++)this.blendModes.push({func:[t.ONE,t.ONE_MINUS_SRC_ALPHA],equation:t.FUNC_ADD});this.blendModes[1].func=[t.ONE,t.DST_ALPHA],this.blendModes[2].func=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[t.ONE,t.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[t.ZERO,t.ONE_MINUS_SRC_ALPHA],equation:t.FUNC_REVERSE_SUBTRACT},this.glFormats[0]=t.BYTE,this.glFormats[1]=t.SHORT,this.glFormats[2]=t.UNSIGNED_BYTE,this.glFormats[3]=t.UNSIGNED_SHORT,this.glFormats[4]=t.FLOAT;var a=t.getSupportedExtensions();e.maxTextures||(e.maxTextures=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)),e.maxTextureSize||(e.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE));var u=\"WEBGL_compressed_texture_\",d=\"WEBKIT_\"+u;this.compression.ETC1=t.getExtension(u+\"etc1\")||t.getExtension(d+\"etc1\"),this.compression.PVRTC=t.getExtension(u+\"pvrtc\")||t.getExtension(d+\"pvrtc\"),this.compression.S3TC=t.getExtension(u+\"s3tc\")||t.getExtension(d+\"s3tc\"),this.supportedExtensions=a,t.disable(t.DEPTH_TEST),t.disable(t.CULL_FACE),t.enable(t.BLEND),t.clearColor(n.redGL,n.greenGL,n.blueGL,n.alphaGL);for(var g=0;g<this.currentTextures.length;++g)this.currentTextures[g]=null;return this.pipelines={},this.addPipeline(\"TextureTintPipeline\",new c({game:i,renderer:this})),this.addPipeline(\"BitmapMaskPipeline\",new l({game:i,renderer:this})),this.addPipeline(\"Light2D\",new f({game:i,renderer:this,maxLights:e.maxLights})),this.setBlendMode(r.BlendModes.NORMAL),i.textures.once(h.READY,this.boot,this),this},boot:function(){for(var e in this.pipelines)this.pipelines[e].boot();var t=this.game.textures.getFrame(\"__DEFAULT\");this.pipelines.TextureTintPipeline.currentFrame=t,this.blankTexture=t;var i=this.gl;i.bindFramebuffer(i.FRAMEBUFFER,null),i.enable(i.SCISSOR_TEST),this.setPipeline(this.pipelines.TextureTintPipeline),this.game.scale.on(\"resize\",this.onResize,this);var r=this.game.scale.baseSize;this.resize(r.width,r.height,this.game.scale.resolution)},onResize:function(e,t,i,r){t.width===this.width&&t.height===this.height&&r===this.resolution||this.resize(t.width,t.height,r)},resize:function(e,t,i){var r=this.gl,s=this.pipelines;for(var n in this.width=e,this.height=t,this.resolution=i,r.viewport(0,0,e,t),s)s[n].resize(e,t,i);return this.drawingBufferHeight=r.drawingBufferHeight,r.scissor(0,r.drawingBufferHeight-t,e,t),this.defaultCamera.setSize(e,t),this},onContextRestored:function(e,t){return this.restoredContextCallbacks.push([e,t]),this},onContextLost:function(e,t){return this.lostContextCallbacks.push([e,t]),this},hasExtension:function(e){return!!this.supportedExtensions&&this.supportedExtensions.indexOf(e)},getExtension:function(e){return this.hasExtension(e)?(e in this.extensions||(this.extensions[e]=this.gl.getExtension(e)),this.extensions[e]):null},flush:function(){this.currentPipeline&&this.currentPipeline.flush()},hasPipeline:function(e){return e in this.pipelines},getPipeline:function(e){return this.hasPipeline(e)?this.pipelines[e]:null},removePipeline:function(e){return delete this.pipelines[e],this},addPipeline:function(e,t){return this.hasPipeline(e)?console.warn(\"Pipeline exists: \"+e):this.pipelines[e]=t,t.name=e,this.pipelines[e].resize(this.width,this.height,this.config.resolution),t},pushScissor:function(e,t,i,r,s){void 0===s&&(s=this.drawingBufferHeight);var n=[e,t,i,r];return this.scissorStack.push(n),this.setScissor(e,t,i,r,s),this.currentScissor=n,n},setScissor:function(e,t,i,r,s){var n=this.gl,h=this.currentScissor,o=i>0&&r>0;if(h&&o){var a=h[0],u=h[1],l=h[2],f=h[3];o=a!==e||u!==t||l!==i||f!==r}o&&(this.flush(),n.scissor(e,s-t-r,i,r))},popScissor:function(){var e=this.scissorStack;e.pop();var t=e[e.length-1];t&&this.setScissor(t[0],t[1],t[2],t[3]),this.currentScissor=t},setPipeline:function(e,t){return this.currentPipeline===e&&this.currentPipeline.vertexBuffer===this.currentVertexBuffer&&this.currentPipeline.program===this.currentProgram||(this.flush(),this.currentPipeline=e,this.currentPipeline.bind()),this.currentPipeline.onBind(t),this.currentPipeline},rebindPipeline:function(e){var t=this.gl;t.disable(t.DEPTH_TEST),t.disable(t.CULL_FACE),t.disable(t.STENCIL_TEST),t.clear(t.DEPTH_BUFFER_BIT|t.STENCIL_BUFFER_BIT),t.viewport(0,0,this.width,this.height),this.setBlendMode(0,!0),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this.blankTexture.glTexture),this.currentActiveTextureUnit=0,this.currentTextures[0]=this.blankTexture.glTexture,this.currentPipeline=e,this.currentPipeline.bind(),this.currentPipeline.onBind()},clearPipeline:function(){this.flush(),this.currentPipeline=null,this.currentProgram=null,this.currentVertexBuffer=null,this.currentIndexBuffer=null,this.setBlendMode(0,!0)},setBlendMode:function(e,t){void 0===t&&(t=!1);var i=this.gl,s=this.blendModes[e];return!!(t||e!==r.BlendModes.SKIP_CHECK&&this.currentBlendMode!==e)&&(this.flush(),i.enable(i.BLEND),i.blendEquation(s.equation),s.func.length>2?i.blendFuncSeparate(s.func[0],s.func[1],s.func[2],s.func[3]):i.blendFunc(s.func[0],s.func[1]),this.currentBlendMode=e,!0)},addBlendMode:function(e,t){return this.blendModes.push({func:e,equation:t})-1},updateBlendMode:function(e,t,i){return this.blendModes[e]&&(this.blendModes[e].func=t,i&&(this.blendModes[e].equation=i)),this},removeBlendMode:function(e){return e>17&&this.blendModes[e]&&this.blendModes.splice(e,1),this},setBlankTexture:function(e){void 0===e&&(e=!1),!e&&0===this.currentActiveTextureUnit&&this.currentTextures[0]||this.setTexture2D(this.blankTexture.glTexture,0)},setTexture2D:function(e,t,i){void 0===i&&(i=!0);var r=this.gl;return e!==this.currentTextures[t]&&(i&&this.flush(),this.currentActiveTextureUnit!==t&&(r.activeTexture(r.TEXTURE0+t),this.currentActiveTextureUnit=t),r.bindTexture(r.TEXTURE_2D,e),this.currentTextures[t]=e),this},setFramebuffer:function(e,t){void 0===t&&(t=!1);var i=this.gl,r=this.width,s=this.height;return e!==this.currentFramebuffer&&(e&&e.renderTexture?(r=e.renderTexture.width,s=e.renderTexture.height):this.flush(),i.bindFramebuffer(i.FRAMEBUFFER,e),i.viewport(0,0,r,s),t&&(e?(this.drawingBufferHeight=s,this.pushScissor(0,0,r,s)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=e),this},setProgram:function(e){var t=this.gl;return e!==this.currentProgram&&(this.flush(),t.useProgram(e),this.currentProgram=e),this},setVertexBuffer:function(e){var t=this.gl;return e!==this.currentVertexBuffer&&(this.flush(),t.bindBuffer(t.ARRAY_BUFFER,e),this.currentVertexBuffer=e),this},setIndexBuffer:function(e){var t=this.gl;return e!==this.currentIndexBuffer&&(this.flush(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.currentIndexBuffer=e),this},createTextureFromSource:function(e,t,i,n){var h=this.gl,o=h.NEAREST,a=h.CLAMP_TO_EDGE;return t=e?e.width:t,i=e?e.height:i,s(t,i)&&(a=h.REPEAT),n===r.ScaleModes.LINEAR&&this.config.antialias&&(o=h.LINEAR),e||\"number\"!=typeof t||\"number\"!=typeof i?this.createTexture2D(0,o,o,a,a,h.RGBA,e):this.createTexture2D(0,o,o,a,a,h.RGBA,null,t,i)},createTexture2D:function(e,t,i,r,s,n,h,o,a,u){u=null==u||u;var l=this.gl,f=l.createTexture();return this.setTexture2D(f,0),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,t),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,i),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,s),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,r),l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,u),null==h?l.texImage2D(l.TEXTURE_2D,e,n,o,a,0,n,l.UNSIGNED_BYTE,null):(l.texImage2D(l.TEXTURE_2D,e,n,n,l.UNSIGNED_BYTE,h),o=h.width,a=h.height),this.setTexture2D(null,0),f.isAlphaPremultiplied=u,f.isRenderTexture=!1,f.width=o,f.height=a,this.nativeTextures.push(f),f},createFramebuffer:function(e,t,i,r){var s,n=this.gl,h=n.createFramebuffer();if(this.setFramebuffer(h),r){var o=n.createRenderbuffer();n.bindRenderbuffer(n.RENDERBUFFER,o),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,e,t),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,o)}if(i.isRenderTexture=!0,i.isAlphaPremultiplied=!1,n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,i,0),(s=n.checkFramebufferStatus(n.FRAMEBUFFER))!==n.FRAMEBUFFER_COMPLETE){throw new Error(\"Framebuffer incomplete. Framebuffer status: \"+{36054:\"Incomplete Attachment\",36055:\"Missing Attachment\",36057:\"Incomplete Dimensions\",36061:\"Framebuffer Unsupported\"}[s])}return h.renderTexture=i,this.setFramebuffer(null),h},createProgram:function(e,t){var i=this.gl,r=i.createProgram(),s=i.createShader(i.VERTEX_SHADER),n=i.createShader(i.FRAGMENT_SHADER);if(i.shaderSource(s,e),i.shaderSource(n,t),i.compileShader(s),i.compileShader(n),!i.getShaderParameter(s,i.COMPILE_STATUS))throw new Error(\"Failed to compile Vertex Shader:\\n\"+i.getShaderInfoLog(s));if(!i.getShaderParameter(n,i.COMPILE_STATUS))throw new Error(\"Failed to compile Fragment Shader:\\n\"+i.getShaderInfoLog(n));if(i.attachShader(r,s),i.attachShader(r,n),i.linkProgram(r),!i.getProgramParameter(r,i.LINK_STATUS))throw new Error(\"Failed to link program:\\n\"+i.getProgramInfoLog(r));return r},createVertexBuffer:function(e,t){var i=this.gl,r=i.createBuffer();return this.setVertexBuffer(r),i.bufferData(i.ARRAY_BUFFER,e,t),this.setVertexBuffer(null),r},createIndexBuffer:function(e,t){var i=this.gl,r=i.createBuffer();return this.setIndexBuffer(r),i.bufferData(i.ELEMENT_ARRAY_BUFFER,e,t),this.setIndexBuffer(null),r},deleteTexture:function(e){var t=this.nativeTextures.indexOf(e);return-1!==t&&n(this.nativeTextures,t),this.gl.deleteTexture(e),this.currentTextures[0]!==e||this.game.pendingDestroy||this.setBlankTexture(!0),this},deleteFramebuffer:function(e){return this.gl.deleteFramebuffer(e),this},deleteProgram:function(e){return this.gl.deleteProgram(e),this},deleteBuffer:function(e){return this.gl.deleteBuffer(e),this},preRenderCamera:function(e){var i=e._cx,r=e._cy,s=e._cw,n=e._ch,h=this.pipelines.TextureTintPipeline,o=e.backgroundColor;if(e.renderToTexture){this.flush(),this.pushScissor(i,r,s,-n),this.setFramebuffer(e.framebuffer);var u=this.gl;u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT),h.projOrtho(i,s+i,r,n+r,-1e3,1e3),o.alphaGL>0&&h.drawFillRect(i,r,s+i,n+r,a.getTintFromFloats(o.redGL,o.greenGL,o.blueGL,1),o.alphaGL),e.emit(t.PRE_RENDER,e)}else this.pushScissor(i,r,s,n),o.alphaGL>0&&h.drawFillRect(i,r,s,n,a.getTintFromFloats(o.redGL,o.greenGL,o.blueGL,1),o.alphaGL)},postRenderCamera:function(e){var i=this.pipelines.TextureTintPipeline;if(e.flashEffect.postRenderWebGL(i,a.getTintFromFloats),e.fadeEffect.postRenderWebGL(i,a.getTintFromFloats),e.dirty=!1,this.popScissor(),e.renderToTexture){i.flush(),this.setFramebuffer(null),e.emit(t.POST_RENDER,e),i.projOrtho(0,i.width,i.height,0,-1e3,1e3);var r=a.getTintAppendFloatAlpha;(e.pipeline?e.pipeline:i).batchTexture(e,e.glTexture,e.width,e.height,e.x,e.y,e.width,e.height,e.zoom,e.zoom,e.rotation,e.flipX,!e.flipY,1,1,0,0,0,0,e.width,e.height,r(e._tintTL,e._alphaTL),r(e._tintTR,e._alphaTR),r(e._tintBL,e._alphaBL),r(e._tintBR,e._alphaBR),e._isTinted&&e.tintFill,0,0,this.defaultCamera,null),this.setBlankTexture(!0)}},preRender:function(){if(!this.contextLost){var e=this.gl,t=this.pipelines;if(e.bindFramebuffer(e.FRAMEBUFFER,null),this.config.clearBeforeRender){var i=this.config.backgroundColor;e.clearColor(i.redGL,i.greenGL,i.blueGL,i.alphaGL),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT|e.STENCIL_BUFFER_BIT)}for(var r in e.enable(e.SCISSOR_TEST),t)t[r].onPreRender();this.currentScissor=[0,0,this.width,this.height],this.scissorStack=[this.currentScissor],this.game.scene.customViewports&&e.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.setPipeline(this.pipelines.TextureTintPipeline)}},render:function(e,t,i,s){if(!this.contextLost){var n=t.list,h=n.length,o=this.pipelines;for(var a in o)o[a].onRender(e,s);this.preRenderCamera(s);for(var u=0;u<h;u++){var l=n[u];if(l.willRender(s)){l.blendMode!==this.currentBlendMode&&this.setBlendMode(l.blendMode);var f=l.mask;f?(f.preRenderWebGL(this,l,s),l.renderWebGL(this,l,i,s),f.postRenderWebGL(this,l)):l.renderWebGL(this,l,i,s)}}this.setBlendMode(r.BlendModes.NORMAL),this.postRenderCamera(s)}},postRender:function(){if(!this.contextLost){this.flush();var e=this.snapshotState;e.callback&&(u(this.canvas,e),e.callback=null);var t=this.pipelines;for(var i in t)t[i].onPostRender()}},snapshot:function(e,t,i){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,e,t,i)},snapshotArea:function(e,t,i,r,s,n,h){var o=this.snapshotState;return o.callback=s,o.type=n,o.encoder=h,o.getPixel=!1,o.x=e,o.y=t,o.width=Math.min(i,this.gl.drawingBufferWidth),o.height=Math.min(r,this.gl.drawingBufferHeight),this},snapshotPixel:function(e,t,i){return this.snapshotArea(e,t,1,1,i),this.snapshotState.getPixel=!0,this},canvasToTexture:function(e,t,i){void 0===i&&(i=!1);var r=this.gl;if(t)this.setTexture2D(t,0),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e),t.width=e.width,t.height=e.height,this.setTexture2D(null,0);else{var n=r.CLAMP_TO_EDGE;!i&&s(e.width,e.height)&&(n=r.REPEAT);var h=this.config.antialias?r.LINEAR:r.NEAREST;t=this.createTexture2D(0,h,h,n,n,r.RGBA,e,e.width,e.height,!0)}return t},setTextureFilter:function(e,t){var i=this.gl,r=[i.LINEAR,i.NEAREST][t];return this.setTexture2D(e,0),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,r),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,r),this.setTexture2D(null,0),this},setFloat1:function(e,t,i){return this.setProgram(e),this.gl.uniform1f(this.gl.getUniformLocation(e,t),i),this},setFloat2:function(e,t,i,r){return this.setProgram(e),this.gl.uniform2f(this.gl.getUniformLocation(e,t),i,r),this},setFloat3:function(e,t,i,r,s){return this.setProgram(e),this.gl.uniform3f(this.gl.getUniformLocation(e,t),i,r,s),this},setFloat4:function(e,t,i,r,s,n){return this.setProgram(e),this.gl.uniform4f(this.gl.getUniformLocation(e,t),i,r,s,n),this},setFloat1v:function(e,t,i){return this.setProgram(e),this.gl.uniform1fv(this.gl.getUniformLocation(e,t),i),this},setFloat2v:function(e,t,i){return this.setProgram(e),this.gl.uniform2fv(this.gl.getUniformLocation(e,t),i),this},setFloat3v:function(e,t,i){return this.setProgram(e),this.gl.uniform3fv(this.gl.getUniformLocation(e,t),i),this},setFloat4v:function(e,t,i){return this.setProgram(e),this.gl.uniform4fv(this.gl.getUniformLocation(e,t),i),this},setInt1:function(e,t,i){return this.setProgram(e),this.gl.uniform1i(this.gl.getUniformLocation(e,t),i),this},setInt2:function(e,t,i,r){return this.setProgram(e),this.gl.uniform2i(this.gl.getUniformLocation(e,t),i,r),this},setInt3:function(e,t,i,r,s){return this.setProgram(e),this.gl.uniform3i(this.gl.getUniformLocation(e,t),i,r,s),this},setInt4:function(e,t,i,r,s,n){return this.setProgram(e),this.gl.uniform4i(this.gl.getUniformLocation(e,t),i,r,s,n),this},setMatrix2:function(e,t,i,r){return this.setProgram(e),this.gl.uniformMatrix2fv(this.gl.getUniformLocation(e,t),i,r),this},setMatrix3:function(e,t,i,r){return this.setProgram(e),this.gl.uniformMatrix3fv(this.gl.getUniformLocation(e,t),i,r),this},setMatrix4:function(e,t,i,r){return this.setProgram(e),this.gl.uniformMatrix4fv(this.gl.getUniformLocation(e,t),i,r),this},getMaxTextures:function(){return this.config.maxTextures},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){for(var e in this.pipelines)this.pipelines[e].destroy(),delete this.pipelines[e];for(var t=0;t<this.nativeTextures.length;t++)this.deleteTexture(this.nativeTextures[t]),delete this.nativeTextures[t];delete this.gl,delete this.game,this.contextLost=!0,this.extensions={},this.nativeTextures.length=0}});module.exports=d;"},"sourceMaps":null,"error":null,"hash":"59692154e6e256cf5a8a270a9f498235","cacheData":{"env":{}}}