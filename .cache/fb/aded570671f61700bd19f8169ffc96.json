{"id":"6aHN","dependencies":[{"name":"/Users/julia/Documents/GitHub/N-3KO/package.json","includedInParent":true,"mtime":1557756471451},{"name":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/package.json","includedInParent":true,"mtime":1557756490182},{"name":"../snapshot/CanvasSnapshot","loc":{"line":8,"column":29},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/renderer/canvas/CanvasRenderer.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/renderer/snapshot/CanvasSnapshot.js"},{"name":"../../cameras/2d/events","loc":{"line":9,"column":27},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/renderer/canvas/CanvasRenderer.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/cameras/2d/events/index.js"},{"name":"../../utils/Class","loc":{"line":10,"column":20},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/renderer/canvas/CanvasRenderer.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/utils/Class.js"},{"name":"../../const","loc":{"line":11,"column":20},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/renderer/canvas/CanvasRenderer.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/const.js"},{"name":"./utils/GetBlendModes","loc":{"line":12,"column":28},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/renderer/canvas/CanvasRenderer.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/renderer/canvas/utils/GetBlendModes.js"},{"name":"../ScaleModes","loc":{"line":13,"column":25},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/renderer/canvas/CanvasRenderer.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/renderer/ScaleModes.js"},{"name":"../../display/canvas/Smoothing","loc":{"line":14,"column":24},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/renderer/canvas/CanvasRenderer.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/display/canvas/Smoothing.js"},{"name":"../../gameobjects/components/TransformMatrix","loc":{"line":15,"column":30},"parent":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/renderer/canvas/CanvasRenderer.js","resolved":"/Users/julia/Documents/GitHub/N-3KO/node_modules/phaser/src/gameobjects/components/TransformMatrix.js"}],"generated":{"js":"var t=require(\"../snapshot/CanvasSnapshot\"),e=require(\"../../cameras/2d/events\"),i=require(\"../../utils/Class\"),s=require(\"../../const\"),a=require(\"./utils/GetBlendModes\"),n=require(\"../ScaleModes\"),o=require(\"../../display/canvas/Smoothing\"),r=require(\"../../gameobjects/components/TransformMatrix\"),h=new i({initialize:function(t){this.game=t,this.type=s.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.config={clearBeforeRender:t.config.clearBeforeRender,backgroundColor:t.config.backgroundColor,resolution:t.config.resolution,antialias:t.config.antialias,roundPixels:t.config.roundPixels},this.scaleMode=t.config.antialias?n.LINEAR:n.NEAREST,this.gameCanvas=t.canvas,this.gameContext=this.game.config.context?this.game.config.context:this.gameCanvas.getContext(\"2d\"),this.currentContext=this.gameContext,this.blendModes=a(),this.currentScaleMode=0,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:\"image/png\",encoder:.92},this._tempMatrix1=new r,this._tempMatrix2=new r,this._tempMatrix3=new r,this._tempMatrix4=new r,this.init()},init:function(){this.game.scale.on(\"resize\",this.onResize,this);var t=this.game.scale.baseSize;this.resize(t.width,t.height)},onResize:function(t,e){e.width===this.width&&e.height===this.height||this.resize(e.width,e.height)},resize:function(t,e){this.width=t,this.height=e,this.scaleMode===n.NEAREST&&o.disable(this.gameContext)},onContextLost:function(){},onContextRestored:function(){},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(t){return this.currentContext.globalCompositeOperation=t,this},setContext:function(t){return this.currentContext=t||this.gameContext,this},setAlpha:function(t){return this.currentContext.globalAlpha=t,this},preRender:function(){var t=this.gameContext,e=this.config,i=this.width,s=this.height;t.globalAlpha=1,t.globalCompositeOperation=\"source-over\",t.setTransform(1,0,0,1,0,0),e.clearBeforeRender&&t.clearRect(0,0,i,s),e.transparent||(t.fillStyle=e.backgroundColor.rgba,t.fillRect(0,0,i,s)),t.save(),this.drawCount=0},render:function(t,i,s,a){var n=i.list,o=n.length,r=a._cx,h=a._cy,l=a._cw,c=a._ch,p=a.renderToTexture?a.context:t.sys.context;p.save(),this.game.scene.customViewports&&(p.beginPath(),p.rect(r,h,l,c),p.clip()),this.currentContext=p,a.transparent||(p.fillStyle=a.backgroundColor.rgba,p.fillRect(r,h,l,c)),p.globalAlpha=a.alpha,p.globalCompositeOperation=\"source-over\",this.drawCount+=n.length,a.renderToTexture&&a.emit(e.PRE_RENDER,a),a.matrix.copyToContext(p);for(var g=0;g<o;g++){var u=n[g];u.willRender(a)&&(u.mask&&u.mask.preRenderCanvas(this,u,a),u.renderCanvas(this,u,s,a),u.mask&&u.mask.postRenderCanvas(this,u,a))}p.setTransform(1,0,0,1,0,0),p.globalCompositeOperation=\"source-over\",p.globalAlpha=1,a.flashEffect.postRenderCanvas(p),a.fadeEffect.postRenderCanvas(p),a.dirty=!1,p.restore(),a.renderToTexture&&(a.emit(e.POST_RENDER,a),t.sys.context.drawImage(a.canvas,r,h))},postRender:function(){this.gameContext.restore();var e=this.snapshotState;e.callback&&(t(this.gameCanvas,e),e.callback=null)},snapshot:function(t,e,i){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,t,e,i)},snapshotArea:function(t,e,i,s,a,n,o){var r=this.snapshotState;return r.callback=a,r.type=n,r.encoder=o,r.getPixel=!1,r.x=t,r.y=e,r.width=Math.min(i,this.gameCanvas.width),r.height=Math.min(s,this.gameCanvas.height),this},snapshotPixel:function(t,e,i){return this.snapshotArea(t,e,1,1,i),this.snapshotState.getPixel=!0,this},batchSprite:function(t,e,i,s){var a=i.alpha*t.alpha;if(0!==a){var n=this.currentContext,o=this._tempMatrix1,r=this._tempMatrix2,h=this._tempMatrix3,l=e.canvasData,c=l.x,p=l.y,g=e.cutWidth,u=e.cutHeight,d=e.source.resolution,m=-t.displayOriginX+e.x,f=-t.displayOriginY+e.y,x=t.flipX?-1:1,C=t.flipY?-1:1;if(t.isCropped){var v=t._crop;v.flipX===t.flipX&&v.flipY===t.flipY||e.updateCropUVs(v,t.flipX,t.flipY),g=v.cw,u=v.ch,c=v.cx,p=v.cy,m=-t.displayOriginX+v.x,f=-t.displayOriginY+v.y,-1===x&&(m>=0?m=-(m+g):m<0&&(m=Math.abs(m)-g)),-1===C&&(f>=0?f=-(f+u):f<0&&(f=Math.abs(f)-u))}r.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY),o.copyFrom(i.matrix),s?(o.multiplyWithOffset(s,-i.scrollX*t.scrollFactorX,-i.scrollY*t.scrollFactorY),r.e=t.x,r.f=t.y,o.multiply(r,h)):(r.e-=i.scrollX*t.scrollFactorX,r.f-=i.scrollY*t.scrollFactorY,o.multiply(r,h)),n.save(),h.setToContext(n),n.scale(x,C),n.globalCompositeOperation=this.blendModes[t.blendMode],n.globalAlpha=a,n.drawImage(e.source.image,c,p,g,u,m,f,g/d,u/d),n.restore()}},destroy:function(){this.gameCanvas=null,this.gameContext=null,this.game=null}});module.exports=h;"},"sourceMaps":null,"error":null,"hash":"2bad4f1f452de3d7b84bce5f48015c7d","cacheData":{"env":{}}}